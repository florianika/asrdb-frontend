<form [formGroup]="rule" *ngIf="rule" class="expression-form">
  <div class="rule-form expression">
    <mat-form-field class="full-width">
      <mat-label i18n>Variable</mat-label>
      <input matInput formControlName="variable">
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label i18n>Condition</mat-label>
      <mat-select formControlName="condition">
        <mat-option [value]="getCondition(condition.EQUALS)" i18n>Equals</mat-option>
        <mat-option [value]="getCondition(condition.NOT_EQUALS)" i18n>Not equals</mat-option>
        <mat-option [value]="getCondition(condition.IS_NULL)" i18n>Is null</mat-option>
        <mat-option [value]="getCondition(condition.IS_NOT_NULL)" i18n>Is not null</mat-option>
        <mat-option [value]="getCondition(condition.IN)" i18n>In</mat-option>
        <mat-option [value]="getCondition(condition.NOT_IN)" i18n>Not in</mat-option>
        <mat-option [value]="getCondition(condition.HIGHIER)" i18n>Highier than</mat-option>
        <mat-option [value]="getCondition(condition.HIGHIER_EQ)" i18n>Highier or equal to</mat-option>
        <mat-option [value]="getCondition(condition.LOWER)" i18n>Lower than</mat-option>
        <mat-option [value]="getCondition(condition.LOWER_EQ)" i18n>Lower or equal than</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label i18n>Value</mat-label>
      <input matInput formControlName="value">
    </mat-form-field>
    <div *ngIf="showDeleteButton">
      <button mat-icon-button (click)="openDeleteConditionDialog()"><mat-icon>delete</mat-icon></button>
    </div>
  </div>
  <div class="rule-form expression-operator">
    <mat-form-field *ngIf="showOperator" class="full-width">
      <mat-label i18n>Operator</mat-label>
      <mat-select formControlName="operator">
        <mat-option [value]="operator.AND" i18n>And</mat-option>
        <mat-option [value]="operator.OR" i18n>Or</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-checkbox formControlName="group" *ngIf="rule.value.operator === operator.OR && showOperator" i18n>
      Group with next condition
    </mat-checkbox>
  </div>
</form>


<ng-template #deleteDialog>
  <h2 mat-dialog-title i18n>Delete rule?</h2>
  <mat-dialog-content i18n>This will delete the rule and cannot be undone.</mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->
    <button mat-raised-button color="warn" [mat-dialog-close]="true">Delete</button>
  </mat-dialog-actions>
</ng-template>
